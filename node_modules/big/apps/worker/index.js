var big = require('../../index');
var mesh = require('resource-mesh');
var debug = require('debug')('big::worker');

module['exports'] = function website (opts, cb) {
  opts = opts || {};
  opts.port = opts.port || 8888;
  big.start(opts, function(err, server){

    debug('Started');

    mesh.emitter.on('hello', function (data) {
      console.log('hello', data)
    });

    // after the http static server has started,
    // emit an event on the mesh registering it if a loadbalancer is available
    /*
    mesh.emitter.emit('loadbalancer::addSite', {
      domain: site.domain,
      host: addr.address,
      port: addr.port
    });
    */
    cb(null, server);

  });
  return big;
};